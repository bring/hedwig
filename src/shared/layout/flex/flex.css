/**
 * Block
 */

.hw-flex {
  & > * {
    margin-bottom: var(--hw-spacing-tiny);
    @media (--max-medium) {
      &:last-of-type {
        margin-bottom: 0;
      }
    }
  }

  @media (--large) {
    display: flex;
    & > * {
      flex: 1;
      margin-right: var(--hw-spacing-tiny);
      margin-bottom: 0;
      &:last-of-type {
        margin-right: 0;
      }
    }

    &--gutter-large-desktop > * {
      margin-right: var(--hw-spacing-small);
    }

    &--gutter-larger-desktop > * {
      margin-right: var(--hw-spacing-larger);
    }

    &--gutter-medium-desktop > *{
      margin-right: var(--hw-spacing-smallest);
    }

    &--twos, &--thirds, &--fourths{
      flex-wrap: wrap;
      & > * {
        margin-bottom: var(--hw-spacing-tiny);
      }
    }


    /* Calculation on the widths follows this logic:
        Percentage of width minus (margins between items divided by number of items)
    */
    &--twos > * {
      min-width: calc(50% - (var(--hw-spacing-tiny) / 2)); /* 3 / 2 = 1.5 */
      max-width: calc(50% - (var(--hw-spacing-tiny) / 2));
      &:nth-of-type(2n) {
        margin-right: 0;
      }
    }

    &--thirds > * {
      min-width: calc((100% / 3) - (var(--hw-spacing-tiny) * 2 / 3)); /* 3 * 2 / 3 = 2 */
      max-width: calc((100% / 3) - (var(--hw-spacing-tiny) * 2 / 3));
      &:nth-of-type(3n) {
        margin-right: 0;
      }
    }

    &--fourths > * {
      min-width: calc(25% - (var(--hw-spacing-tiny) * 3 / 4)); /* 3 * 3 / 4 = 2.25 */
      max-width: calc(25% - (var(--hw-spacing-tiny) * 3 / 4));
      &:nth-of-type(4n) {
        margin-right: 0;
      }
    }

    /* Medium gutter desktop calculations */
    &--gutter-medium-desktop&--twos > * {
      min-width: calc(50% - (var(--hw-spacing-smallest) / 2)); /* 18 / 2 = 9 */
      max-width: calc(50% - (var(--hw-spacing-smallest) / 2));
      margin-bottom: var(--hw-spacing-smallest);
    }
    &--gutter-medium-desktop&--thirds > * {
      min-width: calc((100% / 3) - (var(--hw-spacing-smallest) * 2 / 3));
      max-width: calc((100% / 3) - (var(--hw-spacing-smallest) * 2 / 3));
      margin-bottom: var(--hw-spacing-smallest);
    }
    &--gutter-medium-desktop&--fourths > * {
      min-width: calc(25% - (var(--hw-spacing-smallest) * 3 / 4));
      max-width: calc(25% - (var(--hw-spacing-smallest) * 3 / 4));
      margin-bottom: var(--hw-spacing-smallest);
    }

    /* Large gutter desktop calculations */
    &--gutter-large-desktop&--twos > * {
      min-width: calc(50% - (var(--hw-spacing-small) / 2)); /* 18 / 2 = 9 */
      max-width: calc(50% - (var(--hw-spacing-small) / 2));
      margin-bottom: var(--hw-spacing-small);
    }

    &--gutter-large-desktop&--thirds > * {
      min-width: calc((100% / 3) - (var(--hw-spacing-small) * 2 / 3)); /* 18 * 2 / 3 = 12 */
      max-width: calc((100% / 3) - (var(--hw-spacing-small) * 2 / 3));
      margin-bottom: var(--hw-spacing-small);
    }

    &--gutter-large-desktop&--fourths > * {
      min-width: calc(25% - (var(--hw-spacing-small) * 3 / 4)); /* 18 * 3 / 4 = 13.5 */
      max-width: calc(25% - (var(--hw-spacing-small) * 3 / 4));
      margin-bottom: var(--hw-spacing-small);
    }

    /* Larger gutter desktop calculations */
    &--gutter-larger-desktop&--twos > * {
      min-width: calc(50% - (var(--hw-spacing-larger) / 2)); /* 48 / 2 = 24 */
      max-width: calc(50% - (var(--hw-spacing-larger) / 2));
      margin-bottom: var(--hw-spacing-larger);
    }

    &--gutter-larger-desktop&--thirds > * {
      min-width: calc((100% / 3) - (var(--hw-spacing-larger) * 2 / 3)); /* 48 * 2 / 3 = 32 */
      max-width: calc((100% / 3) - (var(--hw-spacing-larger) * 2 / 3));
      margin-bottom: var(--hw-spacing-larger);
    }

    &--gutter-larger-desktop&--fourths > * {
      min-width: calc(25% - (var(--hw-spacing-larger) * 3 / 4)); /* 48 * 3 / 4 = 36 */
      max-width: calc(25% - (var(--hw-spacing-larger) * 3 / 4));
      margin-bottom: var(--hw-spacing-larger);
    }
  }
}
